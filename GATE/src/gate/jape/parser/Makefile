# Makefile for JAPE
# .jj -> .java -> .class

COMPILE.java=CLASSPATH='.;..;..\..\..\..\classes;..\..\..\..\lib\JavaCC.zip;' javac
RUN.java=CLASSPATH='.;..;..\..\..\..\classes;..\..\..\..\lib\JavaCC.zip;' java

all: ParseCpsl.java ParseCpsl.html

written:
	@ for f in `ls`; do \
	  if [ x`grep -l $$f AutoGeneratedFiles.txt` = x ]; then \
	    echo $$f; \
	  fi; \
	done 

javadocs:
	cd ../../..; \
	//X/jdk1.2beta3/bin/javadoc -d javadocs -private gate.creole \
	  gate.jape gate.jape.parser gate.jdm gate.ui gate.util

clean:
	rm -f ../classes/gate/jape/*.class ../../frank/classes/Tsa/*.class

reallyclean:
	rm -f ../classes/Tsa/*.class ../../frank/classes/Tsa/*.class \
	   ../../Gate/classes/*/*.class \
	   ../../Gate/classes/*/*/*.class \
	   ../../Gate/classes/*/*.dependency \
	   ../../Gate/classes/*/*/*.dependency \
	   ../../frank/classes/*/*.class \
	   ../../frank/classes/*/*/*.class \
	   ../../jdm/classes/*/*.class \
	   ../../jdm/classes/*/*/*.class \
	   ../../jdm/classes/*/*.dependency \
	   ../../jdm/classes/*/*/*.dependency \
	   ../../jdm/compiled/*/*.dependency \
	   ../../jdm/compiled/*/*/*.dependency \
	   ../../jdm/compiled/*/*.class \
	   ../../jdm/compiled/*/*/*.class


#ParseCpsl.jj: ParseCpsl.jjt
#	$(RUN.java) '-Dinstall.root=//X/JavaCC/JavaCC-0.8pre1' COM.sun.labs.jjtree.Main $<
ParseCpsl.java: ParseCpsl.jj
	$(RUN.java) '-Dinstall.root=//X/JavaCC/JavaCC-0.8pre1' COM.sun.labs.javacc.Main $<
ParseCpsl.html: ParseCpsl.jj ParseCpslPlain.html
	mv ParseCpsl.html ParseCpslPlain.html || :
	CLASSPATH='.;..;..\classes;X:\JavaCC\JavaCC-0.7.1\JavaCC.zip;' \
	java '-Dinstall.root=//X/JavaCC/JavaCC-0.7.1' COM.sun.labs.jjdoc.JJDocMain -ONE_TABLE=false $<
ParseCpslPlain.html: ParseCpsl.jj
	CLASSPATH='.;..;..\classes;X:\JavaCC\JavaCC-0.7.1\JavaCC.zip;' \
	java '-Dinstall.root=//X/JavaCC/JavaCC-0.7.1' COM.sun.labs.jjdoc.JJDocMain  $<


.SUFFIXES: .java .class .jj .jjt

.jjt.jj:
	$(RUN.java) '-Dinstall.root=//X/JavaCC/JavaCC-0.8pre1' COM.sun.labs.jjtree.Main $<

.jj.java:
	$(RUN.java) '-Dinstall.root=//X/JavaCC/JavaCC-0.8pre1' COM.sun.labs.javacc.Main $<

.jj.html:
	$(RUN.java) '-Dinstall.root=//X/JavaCC/JavaCC-0.8pre1' COM.sun.labs.jjdoc.JJDocMain $<

.java.class:
	CLASSPATH='X:\classes;X:\JavaCC\JavaCC.zip;'${CLASSPATH} \
	$(COMPILE.java) $<

